npm warn exec The following package was not found and will be installed: azure-functions-core-tools@4.6.0
Resolving worker runtime to 'node'.
'local.settings.json' found in root directory (/root/app/code/api).


Azure Functions Core Tools
Core Tools Version:       4.6.0+ab90faafcab539d63cd3d0ce5faf1bca4395fccc (64-bit)
Function Runtime Version: 4.1045.200.25556

[2026-01-10T06:42:23.562Z] Node.js v20 will reach EOL on 2026-04. Consider upgrading: https://aka.ms/functions-nodejs-supported-versions
[2026-01-10T06:42:28.287Z] [api/index.js] Starting handler registration...
[2026-01-10T06:42:28.288Z] [api] Registering: health
[2026-01-10T06:42:28.288Z] [api] Registering: ping
[2026-01-10T06:42:28.288Z] [api] ✓ ping registered
[2026-01-10T06:42:28.288Z] [api] Registering: version
[2026-01-10T06:42:28.288Z] [api] ✓ version registered
[2026-01-10T06:42:28.288Z] [api] Registering: diag
[2026-01-10T06:42:28.288Z] [api] ✓ diag registered
[2026-01-10T06:42:28.288Z] [api] Registering: _diag-hello
[2026-01-10T06:42:28.288Z] [api] ✓ _diag-hello registered
[2026-01-10T06:42:28.288Z] [api] Registering: hello
[2026-01-10T06:42:28.288Z] [api] Registering: proxy-xai
[2026-01-10T06:42:28.288Z] [api] Registering: v1-chat-completions
[2026-01-10T06:42:28.288Z] [api] Registering: _debug-ingress-latest
[2026-01-10T06:42:28.288Z] [api] Registering: _debug-egress-latest
[2026-01-10T06:42:28.289Z] [api] Registering: submit-review
[2026-01-10T06:42:28.289Z] [api] Registering: get-reviews
[2026-01-10T06:42:28.289Z] [api] Registering: xadmin-api-recalc-review-counts
[2026-01-10T06:42:28.289Z] [api] Registering: search-companies
[2026-01-10T06:42:28.289Z] [api] Registering: suggest-refinements
[2026-01-10T06:42:28.289Z] [api] ✓ suggest-refinements registered
[2026-01-10T06:42:28.289Z] [api] Registering: suggest-cities
[2026-01-10T06:42:28.289Z] [api] ✓ suggest-cities registered
[2026-01-10T06:42:28.289Z] [api] Registering: suggest-states
[2026-01-10T06:42:28.289Z] [api] ✓ suggest-states registered
[2026-01-10T06:42:28.289Z] [api] Registering: save-companies
[2026-01-10T06:42:28.289Z] [api] Registering: logo-scrape
[2026-01-10T06:42:28.289Z] [api] Registering: cosmos-smoke
[2026-01-10T06:42:28.289Z] [api] Registering: import-start
[2026-01-10T06:42:28.289Z] [import-start] module_loaded {
[2026-01-10T06:42:28.289Z]   handler_version: 'ded-import-start-b8e7e91a7a6a',
[2026-01-10T06:42:28.289Z]   build_id: 'b8e7e91a7a6a59e83872e7a4634244fba642bff6'
[2026-01-10T06:42:28.290Z] }
[2026-01-10T06:42:28.290Z] [api] Registering: import-backend-ping
[2026-01-10T06:42:28.290Z] [api] Registering: import-status
[2026-01-10T06:42:28.290Z] [api] Registering: import-progress
[2026-01-10T06:42:28.290Z] [api] Registering: import-stop
[2026-01-10T06:42:28.290Z] [api] Registering: import/primary-worker
[2026-01-10T06:42:28.290Z] [api] Registering: google/geocode
[2026-01-10T06:42:28.290Z] [api] Registering: google/translate
[2026-01-10T06:42:28.290Z] [api] Registering: test-echo
[2026-01-10T06:42:28.290Z] [test-echo] Module loaded
[2026-01-10T06:42:28.290Z] [test-echo] Handler registered successfully
[2026-01-10T06:42:28.290Z] [api] ✓ test-echo registered
[2026-01-10T06:42:28.290Z] [api] Registering: companies-list
[2026-01-10T06:42:28.290Z] [companies-list] Starting module load...
[2026-01-10T06:42:28.290Z] [companies-list] @azure/functions imported, app object created
[2026-01-10T06:42:28.290Z] [companies-list] About to register app.http handler...
[2026-01-10T06:42:28.290Z] [companies-list] ✅ Handler registered successfully with app.http v2
[2026-01-10T06:42:28.290Z] [api] ✓ companies-list registered
[2026-01-10T06:42:28.359Z] [api] Registering: keywords-list
[2026-01-10T06:42:28.361Z] [keywords-list] Module loading started
[2026-01-10T06:42:28.361Z] [keywords-list] Registering with app.http...
[2026-01-10T06:42:28.361Z] [keywords-list] ✅ Successfully registered app.http with route: keywords-list
[2026-01-10T06:42:28.361Z] [api] ✓ keywords-list registered
[2026-01-10T06:42:28.361Z] [api] Registering: upload-logo-blob
[2026-01-10T06:42:28.361Z] [api] ✓ upload-logo-blob registered
[2026-01-10T06:42:28.361Z] [api] Registering: delete-logo-blob
[2026-01-10T06:42:28.361Z] [api] ✓ delete-logo-blob registered
[2026-01-10T06:42:28.361Z] [api] Registering: company-logo
[2026-01-10T06:42:28.362Z] [api] ✓ company-logo registered
[2026-01-10T06:42:28.362Z] [api] Registering: xadmin-api-logos
[2026-01-10T06:42:28.362Z] [api] ✓ xadmin-api-logos registered
[2026-01-10T06:42:28.362Z] [api] Registering: retry-logo-import
[2026-01-10T06:42:28.362Z] [api] ✓ retry-logo-import registered
[2026-01-10T06:42:28.362Z] [api] Registering: admin-keywords
[2026-01-10T06:42:28.362Z] [api] ❌ Failed to load admin-keywords: Identifier 'app' has already been declared
[2026-01-10T06:42:28.362Z] [api] Registering: admin-analytics
[2026-01-10T06:42:28.362Z] [api] ✓ admin-analytics registered
[2026-01-10T06:42:28.362Z] [api] Registering: admin-batch-update
[2026-01-10T06:42:28.362Z] [api] ✓ admin-batch-update registered
[2026-01-10T06:42:28.362Z] [api] Registering: admin-bulk-import-config
[2026-01-10T06:42:28.362Z] [api] ✓ admin-bulk-import-config registered
[2026-01-10T06:42:28.362Z] [api] Registering: admin-companies-v2
[2026-01-10T06:42:28.362Z] [api] ✓ admin-companies-v2 registered
[2026-01-10T06:42:28.362Z] [api] Registering: admin-company-history
[2026-01-10T06:42:28.363Z] [api] ✓ admin-company-history registered
[2026-01-10T06:42:28.363Z] [api] Registering: xadmin-api-debug
[2026-01-10T06:42:28.363Z] [api] ✓ xadmin-api-debug registered
[2026-01-10T06:42:28.363Z] [api] Registering: admin-echo
[2026-01-10T06:42:28.363Z] [api] ✓ admin-echo registered
[2026-01-10T06:42:28.363Z] [api] Registering: admin-import-stats
[2026-01-10T06:42:28.363Z] [api] ✓ admin-import-stats registered
[2026-01-10T06:42:28.363Z] [api] Registering: admin-cleanup-import-placeholders
[2026-01-10T06:42:28.363Z] [api] ✓ admin-cleanup-import-placeholders registered
[2026-01-10T06:42:28.363Z] [api] Registering: admin-login
[2026-01-10T06:42:28.363Z] [api] ❌ Failed to load admin-login: Cannot find module 'bcryptjs'
[2026-01-10T06:42:28.363Z] Require stack:
[2026-01-10T06:42:28.363Z] - /root/app/code/api/admin-login/index.js
[2026-01-10T06:42:28.363Z] - /root/app/code/api/index.js
[2026-01-10T06:42:28.363Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js
[2026-01-10T06:42:28.363Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/nodejsWorker.js
[2026-01-10T06:42:28.363Z] [api] Registering: admin-notes
[2026-01-10T06:42:28.363Z] [api] ✓ admin-notes registered
[2026-01-10T06:42:28.364Z] [api] Registering: admin-recalc-stars
[2026-01-10T06:42:28.364Z] [api] ✓ admin-recalc-stars registered
[2026-01-10T06:42:28.364Z] [api] Registering: admin-reviews
[2026-01-10T06:42:28.364Z] [api] ✓ admin-reviews registered
[2026-01-10T06:42:28.364Z] [api] Registering: admin-save-diagnostic
[2026-01-10T06:42:28.364Z] [admin-save-diagnostic] ✅ Diagnostic endpoint registered
[2026-01-10T06:42:28.364Z] [api] ✓ admin-save-diagnostic registered
[2026-01-10T06:42:28.364Z] [api] Registering: admin-star-config
[2026-01-10T06:42:28.364Z] [api] ✓ admin-star-config registered
[2026-01-10T06:42:28.364Z] [api] Registering: admin-undo
[2026-01-10T06:42:28.364Z] [api] ✓ admin-undo registered
[2026-01-10T06:42:28.364Z] [api] Registering: admin-undo-history
[2026-01-10T06:42:28.364Z] [api] ✓ admin-undo-history registered
[2026-01-10T06:42:28.364Z] [api] Registering: admin-update-logos
[2026-01-10T06:42:28.364Z] [api] ✓ admin-update-logos registered
[2026-01-10T06:42:28.364Z] [api] Registering: admin-recent-imports
[2026-01-10T06:42:28.364Z] [api] ✓ admin-recent-imports registered
[2026-01-10T06:42:28.364Z] [api] Registering: admin-refresh-import
[2026-01-10T06:42:28.364Z] [api] ✓ admin-refresh-import registered
[2026-01-10T06:42:28.364Z] [api] Registering: admin-refresh-company
[2026-01-10T06:42:28.364Z] [api] ✓ admin-refresh-company registered
[2026-01-10T06:42:28.365Z] [api] Registering: xadmin-api-refresh-company
[2026-01-10T06:42:28.365Z] [api] ✓ xadmin-api-refresh-company registered
[2026-01-10T06:42:28.365Z] [api] Registering: admin-refresh-reviews
[2026-01-10T06:42:28.365Z] [api] ✓ admin-refresh-reviews registered
[2026-01-10T06:42:28.365Z] [api] Registering: xadmin-api-refresh-reviews
[2026-01-10T06:42:28.365Z] [api] ✓ xadmin-api-refresh-reviews registered
[2026-01-10T06:42:28.365Z] [api] Registering: admin-geocode-location
[2026-01-10T06:42:28.365Z] [api] ✓ admin-geocode-location registered
[2026-01-10T06:42:28.365Z] [api/index.js] ✅ All handler registration complete! Exporting app.
[2026-01-10T06:42:29.257Z] Worker process started and initialized.
[2026-01-10T06:42:30.922Z] The '_diagHello' function is in error: '_diagHello' is not a valid function name.
[2026-01-10T06:42:30.922Z] The '_debug-ingress-latest' function is in error: '_debug-ingress-latest' is not a valid function name.
[2026-01-10T06:42:30.922Z] The '_debug-egress-latest' function is in error: '_debug-egress-latest' is not a valid function name.
[2026-01-10T06:42:30.922Z] The 'admin-cleanup-import-placeholders' function is in error: The specified route conflicts with one or more built in routes.
[2026-01-10T06:42:30.923Z] The 'adminCompanyHistory' function is in error: The specified route conflicts with one or more built in routes.
[2026-01-10T06:42:30.923Z] The 'adminCompanyHistoryAlias' function is in error: The specified route conflicts with one or more built in routes.
[2026-01-10T06:42:30.923Z] The 'adminRefreshCompany' function is in error: The specified route conflicts with one or more built in routes.
[2026-01-10T06:42:30.923Z] The 'adminRefreshReviews' function is in error: The specified route conflicts with one or more built in routes.

Functions:

	adminAnalytics: [GET,OPTIONS] http://localhost:7076/api/xadmin-api-analytics

	adminBatchUpdate: [POST,OPTIONS] http://localhost:7076/api/xadmin-api-batch-update

	adminBulkImportConfig: [GET,OPTIONS] http://localhost:7076/api/xadmin-api-bulk-import-config

	adminCompanies: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7076/api/xadmin-api-companies/{id?}

	adminDebug: [GET] http://localhost:7076/api/xadmin-api-debug

	adminEcho: [GET,OPTIONS] http://localhost:7076/api/xadmin-api-echo

	adminGeocodeLocation: [POST,OPTIONS] http://localhost:7076/api/xadmin-api-geocode-location

	adminImportStats: [GET,OPTIONS] http://localhost:7076/api/xadmin-api-import-stats

	adminNotes: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7076/api/xadmin-api-notes

	adminRecalcStars: [POST,OPTIONS] http://localhost:7076/api/xadmin-api-recalc-stars

	adminRecentImports: [GET,OPTIONS] http://localhost:7076/api/xadmin-api-recent-imports

	adminRefreshImport: [POST,OPTIONS] http://localhost:7076/api/xadmin-api-refresh-import

	adminReviews: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7076/api/xadmin-api-reviews

	adminSaveDiagnostic: [GET,POST,OPTIONS] http://localhost:7076/api/xadmin-api-save-diagnostic

	adminStarConfig: [GET,PUT,OPTIONS] http://localhost:7076/api/xadmin-api-star-config

	adminUndo: [POST,OPTIONS] http://localhost:7076/api/xadmin-api-undo

	adminUndoHistory: [GET,DELETE,OPTIONS] http://localhost:7076/api/xadmin-api-undo-history

	adminUpdateLogos: [POST,OPTIONS] http://localhost:7076/api/xadmin-api-update-logos

	companies-list: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7076/api/companies-list

	company-logo: [GET,OPTIONS] http://localhost:7076/api/company-logo

	cosmos-smoke: [GET,OPTIONS] http://localhost:7076/api/cosmos/smoke

	delete-logo-blob: [POST,OPTIONS] http://localhost:7076/api/delete-logo-blob

	diag: [GET,OPTIONS] http://localhost:7076/api/diag

	get-reviews: [GET,OPTIONS] http://localhost:7076/api/get-reviews

	googleGeocode: [POST,OPTIONS] http://localhost:7076/api/google/geocode

	googleTranslate: [POST,OPTIONS] http://localhost:7076/api/google/translate

	health: [GET,OPTIONS] http://localhost:7076/api/health

	hello: [GET,OPTIONS] http://localhost:7076/api/hello

	import-backend-ping: [GET,OPTIONS] http://localhost:7076/api/import/backend-ping

	import-primary-worker: [POST,OPTIONS] http://localhost:7076/api/import/primary-worker

	import-progress: [GET,OPTIONS] http://localhost:7076/api/import/progress

	import-start: [GET,POST,OPTIONS] http://localhost:7076/api/import/start

	import-start-legacy: [GET,POST,OPTIONS] http://localhost:7076/api/import-start

	import-status: [GET,OPTIONS] http://localhost:7076/api/import/status

	import-status-alt: [GET,OPTIONS] http://localhost:7076/api/import-status

	import-stop: [POST,OPTIONS] http://localhost:7076/api/import/stop

	keywords-list: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7076/api/keywords-list

	logo-scrape: [POST,OPTIONS] http://localhost:7076/api/logo-scrape

	ping: [GET,OPTIONS] http://localhost:7076/api/ping

	proxy-xai: [GET,POST,OPTIONS] http://localhost:7076/api/proxy-xai

	retry-logo-import: [POST,OPTIONS] http://localhost:7076/api/retry-logo-import

	save-companies: [POST,OPTIONS] http://localhost:7076/api/save-companies

	search-companies: [GET,OPTIONS] http://localhost:7076/api/search-companies

	submit-review: [POST,OPTIONS] http://localhost:7076/api/submit-review

	suggest-cities: [GET,OPTIONS] http://localhost:7076/api/suggest-cities

	suggest-refinements: [GET,OPTIONS] http://localhost:7076/api/suggest-refinements

	suggest-states: [GET,OPTIONS] http://localhost:7076/api/suggest-states

	test-echo: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7076/api/test-echo

	upload-logo-blob: [POST,OPTIONS] http://localhost:7076/api/upload-logo-blob

	v1-chat-completions: [POST,OPTIONS] http://localhost:7076/api/v1/chat/completions

	version: [GET,OPTIONS] http://localhost:7076/api/version

	xadmin-api-logos: [PUT,OPTIONS] http://localhost:7076/api/xadmin-api-logos/{companyId}

	xadminApiRecalcReviewCounts: [POST,OPTIONS] http://localhost:7076/api/xadmin-api-recalc-review-counts

	xadminApiRefreshCompany: [GET,POST,OPTIONS] http://localhost:7076/api/xadmin-api-refresh-company

	xadminApiRefreshReviews: [GET,POST,OPTIONS] http://localhost:7076/api/xadmin-api-refresh-reviews

	xai-smoke: [GET,OPTIONS] http://localhost:7076/api/xai/smoke

For detailed output, run func with --verbose flag.
[2026-01-10T06:42:33.479Z] Host lock lease acquired by instance ID '000000000000000000000000D594D7C2'.
[2026-01-10T06:43:25.025Z] Detected mixed function app. Some functions may not be indexed - /root/app/code/api/_diag-hello, /root/app/code/api/admin-companies-history, /root/app/code/api/admin-company-history Refer to the documentation to filter warning - https://docs.microsoft.com/en-us/azure/azure-functions/configure-monitoring?tabs=v2
