Resolving worker runtime to 'node'.
'local.settings.json' found in root directory (/root/app/code/api).


Azure Functions Core Tools
Core Tools Version:       4.6.0+ab90faafcab539d63cd3d0ce5faf1bca4395fccc (64-bit)
Function Runtime Version: 4.1045.200.25556

[2026-01-10T05:32:05.140Z] Node.js v20 will reach EOL on 2026-04. Consider upgrading: https://aka.ms/functions-nodejs-supported-versions
[2026-01-10T05:32:05.803Z] [api/index.js] Starting handler registration...
[2026-01-10T05:32:05.804Z] [api] Registering: health
[2026-01-10T05:32:05.804Z] [api] Registering: ping
[2026-01-10T05:32:05.804Z] [api] ✓ ping registered
[2026-01-10T05:32:05.804Z] [api] Registering: version
[2026-01-10T05:32:05.804Z] [api] ✓ version registered
[2026-01-10T05:32:05.804Z] [api] Registering: diag
[2026-01-10T05:32:05.804Z] [api] ✓ diag registered
[2026-01-10T05:32:05.804Z] [api] Registering: _diag-hello
[2026-01-10T05:32:05.804Z] [api] ✓ _diag-hello registered
[2026-01-10T05:32:05.804Z] [api] Registering: hello
[2026-01-10T05:32:05.804Z] [api] Registering: proxy-xai
[2026-01-10T05:32:05.804Z] [api] Registering: v1-chat-completions
[2026-01-10T05:32:05.804Z] [api] Registering: _debug-ingress-latest
[2026-01-10T05:32:05.804Z] [api] Registering: _debug-egress-latest
[2026-01-10T05:32:05.804Z] [api] Registering: submit-review
[2026-01-10T05:32:05.804Z] [api] Registering: get-reviews
[2026-01-10T05:32:05.804Z] [api] Registering: xadmin-api-recalc-review-counts
[2026-01-10T05:32:05.805Z] [api] Registering: search-companies
[2026-01-10T05:32:05.805Z] [api] Registering: suggest-refinements
[2026-01-10T05:32:05.805Z] [api] ✓ suggest-refinements registered
[2026-01-10T05:32:05.805Z] [api] Registering: suggest-cities
[2026-01-10T05:32:05.805Z] [api] ✓ suggest-cities registered
[2026-01-10T05:32:05.805Z] [api] Registering: suggest-states
[2026-01-10T05:32:05.805Z] [api] ✓ suggest-states registered
[2026-01-10T05:32:05.805Z] [api] Registering: save-companies
[2026-01-10T05:32:05.805Z] [api] Registering: logo-scrape
[2026-01-10T05:32:05.805Z] [api] Registering: cosmos-smoke
[2026-01-10T05:32:05.805Z] [api] Registering: import-start
[2026-01-10T05:32:05.805Z] [api] Failed to load logo-scrape: Cannot find module '@azure/storage-blob'
[2026-01-10T05:32:05.805Z] Require stack:
[2026-01-10T05:32:05.805Z] - /root/app/code/api/_logoImport.js
[2026-01-10T05:32:05.805Z] - /root/app/code/api/logo-scrape/index.js
[2026-01-10T05:32:05.805Z] - /root/app/code/api/index.js
[2026-01-10T05:32:05.805Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js
[2026-01-10T05:32:05.806Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/nodejsWorker.js
[2026-01-10T05:32:05.806Z] [import-start] module_loaded {
[2026-01-10T05:32:05.806Z]   handler_version: 'ded-import-start-21929087188c',
[2026-01-10T05:32:05.806Z]   build_id: '21929087188c6f9ed11b46f5e463d000656c2230'
[2026-01-10T05:32:05.806Z] }
[2026-01-10T05:32:05.806Z] [api] Registering: import-backend-ping
[2026-01-10T05:32:05.806Z] [api] Registering: import-status
[2026-01-10T05:32:05.806Z] [api] Registering: import-progress
[2026-01-10T05:32:05.806Z] [api] Registering: import-stop
[2026-01-10T05:32:05.806Z] [api] Registering: import/primary-worker
[2026-01-10T05:32:05.806Z] [api] Registering: google/geocode
[2026-01-10T05:32:05.806Z] [api] Registering: google/translate
[2026-01-10T05:32:05.806Z] [api] Registering: test-echo
[2026-01-10T05:32:05.806Z] [test-echo] Module loaded
[2026-01-10T05:32:05.806Z] [test-echo] Handler registered successfully
[2026-01-10T05:32:05.806Z] [api] ✓ test-echo registered
[2026-01-10T05:32:05.806Z] [api] Registering: companies-list
[2026-01-10T05:32:05.807Z] [companies-list] Starting module load...
[2026-01-10T05:32:05.807Z] [companies-list] @azure/functions imported, app object created
[2026-01-10T05:32:05.807Z] [companies-list] About to register app.http handler...
[2026-01-10T05:32:05.807Z] [companies-list] ✅ Handler registered successfully with app.http v2
[2026-01-10T05:32:05.807Z] [api] ✓ companies-list registered
[2026-01-10T05:32:05.807Z] [api] Registering: keywords-list
[2026-01-10T05:32:05.807Z] [keywords-list] Module loading started
[2026-01-10T05:32:05.807Z] [keywords-list] Registering with app.http...
[2026-01-10T05:32:05.807Z] [keywords-list] ✅ Successfully registered app.http with route: keywords-list
[2026-01-10T05:32:05.807Z] [api] ✓ keywords-list registered
[2026-01-10T05:32:05.807Z] [api] Registering: upload-logo-blob
[2026-01-10T05:32:05.807Z] [api] ❌ Failed to load upload-logo-blob: Cannot find module '@azure/storage-blob'
[2026-01-10T05:32:05.807Z] Require stack:
[2026-01-10T05:32:05.807Z] - /root/app/code/api/upload-logo-blob/index.js
[2026-01-10T05:32:05.807Z] - /root/app/code/api/index.js
[2026-01-10T05:32:05.807Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js
[2026-01-10T05:32:05.807Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/nodejsWorker.js
[2026-01-10T05:32:05.807Z] [api] Registering: delete-logo-blob
[2026-01-10T05:32:05.807Z] [api] ❌ Failed to load delete-logo-blob: Cannot find module '@azure/storage-blob'
[2026-01-10T05:32:05.807Z] Require stack:
[2026-01-10T05:32:05.807Z] - /root/app/code/api/delete-logo-blob/index.js
[2026-01-10T05:32:05.808Z] - /root/app/code/api/index.js
[2026-01-10T05:32:05.808Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js
[2026-01-10T05:32:05.808Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/nodejsWorker.js
[2026-01-10T05:32:05.808Z] [api] ❌ Failed to load retry-logo-import: Cannot find module '@azure/storage-blob'
[2026-01-10T05:32:05.808Z] Require stack:
[2026-01-10T05:32:05.808Z] - /root/app/code/api/_logoImport.js
[2026-01-10T05:32:05.808Z] - /root/app/code/api/retry-logo-import/index.js
[2026-01-10T05:32:05.808Z] - /root/app/code/api/index.js
[2026-01-10T05:32:05.808Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js
[2026-01-10T05:32:05.808Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/nodejsWorker.js
[2026-01-10T05:32:05.808Z] [api] Registering: company-logo
[2026-01-10T05:32:05.808Z] [api] ✓ company-logo registered
[2026-01-10T05:32:05.808Z] [api] Registering: xadmin-api-logos
[2026-01-10T05:32:05.808Z] [api] ✓ xadmin-api-logos registered
[2026-01-10T05:32:05.808Z] [api] Registering: retry-logo-import
[2026-01-10T05:32:05.808Z] [api] Registering: admin-keywords
[2026-01-10T05:32:05.808Z] [api] ❌ Failed to load admin-keywords: Identifier 'app' has already been declared
[2026-01-10T05:32:05.808Z] [api] Registering: admin-analytics
[2026-01-10T05:32:05.808Z] [api] ✓ admin-analytics registered
[2026-01-10T05:32:05.809Z] [api] Registering: admin-batch-update
[2026-01-10T05:32:05.809Z] [api] ✓ admin-batch-update registered
[2026-01-10T05:32:05.809Z] [api] Registering: admin-bulk-import-config
[2026-01-10T05:32:05.809Z] [api] ✓ admin-bulk-import-config registered
[2026-01-10T05:32:05.809Z] [api] Registering: admin-companies-v2
[2026-01-10T05:32:05.809Z] [api] ✓ admin-companies-v2 registered
[2026-01-10T05:32:05.809Z] [api] Registering: admin-company-history
[2026-01-10T05:32:05.809Z] [api] ✓ admin-company-history registered
[2026-01-10T05:32:05.809Z] [api] Registering: xadmin-api-debug
[2026-01-10T05:32:05.809Z] [api] ✓ xadmin-api-debug registered
[2026-01-10T05:32:05.809Z] [api] Registering: admin-echo
[2026-01-10T05:32:05.809Z] [api] ✓ admin-echo registered
[2026-01-10T05:32:05.809Z] [api] Registering: admin-import-stats
[2026-01-10T05:32:05.809Z] [api] ✓ admin-import-stats registered
[2026-01-10T05:32:05.809Z] [api] Registering: admin-cleanup-import-placeholders
[2026-01-10T05:32:05.809Z] [api] ✓ admin-cleanup-import-placeholders registered
[2026-01-10T05:32:05.809Z] [api] Registering: admin-login
[2026-01-10T05:32:05.809Z] [api] ❌ Failed to load admin-login: Cannot find module 'bcryptjs'
[2026-01-10T05:32:05.809Z] Require stack:
[2026-01-10T05:32:05.809Z] - /root/app/code/api/admin-login/index.js
[2026-01-10T05:32:05.809Z] - /root/app/code/api/index.js
[2026-01-10T05:32:05.809Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/worker-bundle.js
[2026-01-10T05:32:05.810Z] - /root/.npm/_npx/ea74a7a3cf090e3c/node_modules/azure-functions-core-tools/bin/workers/node/dist/src/nodejsWorker.js
[2026-01-10T05:32:05.810Z] [api] Registering: admin-notes
[2026-01-10T05:32:05.810Z] [api] ✓ admin-notes registered
[2026-01-10T05:32:05.810Z] [api] Registering: admin-recalc-stars
[2026-01-10T05:32:05.810Z] [api] ✓ admin-recalc-stars registered
[2026-01-10T05:32:05.810Z] [api] Registering: admin-reviews
[2026-01-10T05:32:05.810Z] [api] ✓ admin-reviews registered
[2026-01-10T05:32:05.810Z] [api] Registering: admin-save-diagnostic
[2026-01-10T05:32:05.810Z] [admin-save-diagnostic] ✅ Diagnostic endpoint registered
[2026-01-10T05:32:05.810Z] [api] ✓ admin-save-diagnostic registered
[2026-01-10T05:32:05.810Z] [api] Registering: admin-star-config
[2026-01-10T05:32:05.810Z] [api] ✓ admin-star-config registered
[2026-01-10T05:32:05.810Z] [api] Registering: admin-undo
[2026-01-10T05:32:05.810Z] [api] ✓ admin-undo registered
[2026-01-10T05:32:05.810Z] [api] Registering: admin-undo-history
[2026-01-10T05:32:05.810Z] [api] ✓ admin-undo-history registered
[2026-01-10T05:32:05.810Z] [api] Registering: admin-update-logos
[2026-01-10T05:32:05.810Z] [api] ✓ admin-update-logos registered
[2026-01-10T05:32:05.810Z] [api] Registering: admin-recent-imports
[2026-01-10T05:32:05.810Z] [api] ✓ admin-recent-imports registered
[2026-01-10T05:32:05.810Z] [api] Registering: admin-refresh-import
[2026-01-10T05:32:05.810Z] [api] ✓ admin-refresh-import registered
[2026-01-10T05:32:05.811Z] [api] Registering: admin-refresh-company
[2026-01-10T05:32:05.811Z] [api] ✓ admin-refresh-company registered
[2026-01-10T05:32:05.811Z] [api] Registering: xadmin-api-refresh-company
[2026-01-10T05:32:05.811Z] [api] ✓ xadmin-api-refresh-company registered
[2026-01-10T05:32:05.811Z] [api] Registering: admin-refresh-reviews
[2026-01-10T05:32:05.811Z] [api] ✓ admin-refresh-reviews registered
[2026-01-10T05:32:05.811Z] [api] Registering: xadmin-api-refresh-reviews
[2026-01-10T05:32:05.811Z] [api] ✓ xadmin-api-refresh-reviews registered
[2026-01-10T05:32:05.811Z] [api] Registering: admin-geocode-location
[2026-01-10T05:32:05.811Z] [api] ✓ admin-geocode-location registered
[2026-01-10T05:32:05.811Z] [api/index.js] ✅ All handler registration complete! Exporting app.
[2026-01-10T05:32:05.890Z] Worker process started and initialized.
[2026-01-10T05:32:06.053Z] The '_diagHello' function is in error: '_diagHello' is not a valid function name.
[2026-01-10T05:32:06.053Z] The '_debug-ingress-latest' function is in error: '_debug-ingress-latest' is not a valid function name.
[2026-01-10T05:32:06.053Z] The '_debug-egress-latest' function is in error: '_debug-egress-latest' is not a valid function name.
[2026-01-10T05:32:06.053Z] The 'admin-cleanup-import-placeholders' function is in error: The specified route conflicts with one or more built in routes.
[2026-01-10T05:32:06.053Z] The 'adminCompanyHistory' function is in error: The specified route conflicts with one or more built in routes.
[2026-01-10T05:32:06.053Z] The 'adminCompanyHistoryAlias' function is in error: The specified route conflicts with one or more built in routes.
[2026-01-10T05:32:06.054Z] The 'adminRefreshCompany' function is in error: The specified route conflicts with one or more built in routes.
[2026-01-10T05:32:06.054Z] The 'adminRefreshReviews' function is in error: The specified route conflicts with one or more built in routes.

Functions:

	adminAnalytics: [GET,OPTIONS] http://localhost:7074/api/xadmin-api-analytics

	adminBatchUpdate: [POST,OPTIONS] http://localhost:7074/api/xadmin-api-batch-update

	adminBulkImportConfig: [GET,OPTIONS] http://localhost:7074/api/xadmin-api-bulk-import-config

	adminCompanies: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7074/api/xadmin-api-companies/{id?}

	adminDebug: [GET] http://localhost:7074/api/xadmin-api-debug

	adminEcho: [GET,OPTIONS] http://localhost:7074/api/xadmin-api-echo

	adminGeocodeLocation: [POST,OPTIONS] http://localhost:7074/api/xadmin-api-geocode-location

	adminImportStats: [GET,OPTIONS] http://localhost:7074/api/xadmin-api-import-stats

	adminNotes: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7074/api/xadmin-api-notes

	adminRecalcStars: [POST,OPTIONS] http://localhost:7074/api/xadmin-api-recalc-stars

	adminRecentImports: [GET,OPTIONS] http://localhost:7074/api/xadmin-api-recent-imports

	adminRefreshImport: [POST,OPTIONS] http://localhost:7074/api/xadmin-api-refresh-import

	adminReviews: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7074/api/xadmin-api-reviews

	adminSaveDiagnostic: [GET,POST,OPTIONS] http://localhost:7074/api/xadmin-api-save-diagnostic

	adminStarConfig: [GET,PUT,OPTIONS] http://localhost:7074/api/xadmin-api-star-config

	adminUndo: [POST,OPTIONS] http://localhost:7074/api/xadmin-api-undo

	adminUndoHistory: [GET,DELETE,OPTIONS] http://localhost:7074/api/xadmin-api-undo-history

	adminUpdateLogos: [POST,OPTIONS] http://localhost:7074/api/xadmin-api-update-logos

	companies-list: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7074/api/companies-list

	company-logo: [GET,OPTIONS] http://localhost:7074/api/company-logo

	cosmos-smoke: [GET,OPTIONS] http://localhost:7074/api/cosmos/smoke

	diag: [GET,OPTIONS] http://localhost:7074/api/diag

	get-reviews: [GET,OPTIONS] http://localhost:7074/api/get-reviews

	googleGeocode: [POST,OPTIONS] http://localhost:7074/api/google/geocode

	googleTranslate: [POST,OPTIONS] http://localhost:7074/api/google/translate

	health: [GET,OPTIONS] http://localhost:7074/api/health

	hello: [GET,OPTIONS] http://localhost:7074/api/hello

	import-backend-ping: [GET,OPTIONS] http://localhost:7074/api/import/backend-ping

	import-primary-worker: [POST,OPTIONS] http://localhost:7074/api/import/primary-worker

	import-progress: [GET,OPTIONS] http://localhost:7074/api/import/progress

	import-start: [GET,POST,OPTIONS] http://localhost:7074/api/import/start

	import-start-legacy: [GET,POST,OPTIONS] http://localhost:7074/api/import-start

	import-status: [GET,OPTIONS] http://localhost:7074/api/import/status

	import-status-alt: [GET,OPTIONS] http://localhost:7074/api/import-status

	import-stop: [POST,OPTIONS] http://localhost:7074/api/import/stop

	keywords-list: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7074/api/keywords-list

	ping: [GET,OPTIONS] http://localhost:7074/api/ping

	proxy-xai: [GET,POST,OPTIONS] http://localhost:7074/api/proxy-xai

	save-companies: [POST,OPTIONS] http://localhost:7074/api/save-companies

	search-companies: [GET,OPTIONS] http://localhost:7074/api/search-companies

	submit-review: [POST,OPTIONS] http://localhost:7074/api/submit-review

	suggest-cities: [GET,OPTIONS] http://localhost:7074/api/suggest-cities

	suggest-refinements: [GET,OPTIONS] http://localhost:7074/api/suggest-refinements

	suggest-states: [GET,OPTIONS] http://localhost:7074/api/suggest-states

	test-echo: [GET,POST,PUT,DELETE,OPTIONS] http://localhost:7074/api/test-echo

	v1-chat-completions: [POST,OPTIONS] http://localhost:7074/api/v1/chat/completions

	version: [GET,OPTIONS] http://localhost:7074/api/version

	xadmin-api-logos: [PUT,OPTIONS] http://localhost:7074/api/xadmin-api-logos/{companyId}

	xadminApiRecalcReviewCounts: [POST,OPTIONS] http://localhost:7074/api/xadmin-api-recalc-review-counts

	xadminApiRefreshCompany: [GET,POST,OPTIONS] http://localhost:7074/api/xadmin-api-refresh-company

	xadminApiRefreshReviews: [GET,POST,OPTIONS] http://localhost:7074/api/xadmin-api-refresh-reviews

	xai-smoke: [GET,OPTIONS] http://localhost:7074/api/xai/smoke

For detailed output, run func with --verbose flag.
[2026-01-10T05:32:09.549Z] Executing 'Functions.ping' (Reason='This function was programmatically called via the host APIs.', Id=8140fc21-5521-4376-bdf7-eba8544643e6)
[2026-01-10T05:32:09.630Z] Executed 'Functions.ping' (Succeeded, Id=8140fc21-5521-4376-bdf7-eba8544643e6, Duration=101ms)
[2026-01-10T05:32:09.667Z] Executing 'Functions.version' (Reason='This function was programmatically called via the host APIs.', Id=46ed320b-1fe8-411d-af70-878e9e1c3b12)
[2026-01-10T05:32:09.672Z] Executed 'Functions.version' (Succeeded, Id=46ed320b-1fe8-411d-af70-878e9e1c3b12, Duration=6ms)
[2026-01-10T05:32:09.682Z] Executing 'Functions.import-status' (Reason='This function was programmatically called via the host APIs.', Id=be7fd45f-b8f8-4749-9bd7-abdce0dcb6bf)
[2026-01-10T05:32:10.814Z] Host lock lease acquired by instance ID '0000000000000000000000000B8DC44F'.
[2026-01-10T05:32:13.930Z] Executed 'Functions.import-status' (Succeeded, Id=be7fd45f-b8f8-4749-9bd7-abdce0dcb6bf, Duration=4249ms)
